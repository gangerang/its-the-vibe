<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>it's the vibe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        body {
            width: 100vw;
            min-height: 300vh;
            background-image: url('its-the-vibe.gif');
            background-repeat: repeat;
            background-size: auto;
            background-position: 0 0;
            cursor: none;
        }

        /* ===================== */
        /* DENNIS FACE CURSOR    */
        /* ===================== */
        #dennis-cursor {
            position: fixed;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            transform: translate(-50%, -50%);
            background-image: url('dennis-cursor.png');
            background-size: cover;
            background-position: center;
            border: 2px solid white;
            box-shadow: 0 0 8px rgba(0,0,0,0.5);
            display: none;
        }

        /* ===================== */
        /* FLOATING QUOTES       */
        /* ===================== */
        .floating-quote {
            position: fixed;
            font-family: 'Georgia', 'Times New Roman', serif;
            font-weight: bold;
            color: white;
            text-shadow:
                2px 2px 0 #000,
                -2px -2px 0 #000,
                2px -2px 0 #000,
                -2px 2px 0 #000,
                0 0 20px rgba(255, 215, 0, 0.6);
            pointer-events: none;
            z-index: 5000;
            white-space: nowrap;
            opacity: 0;
        }

        /* Left to right */
        @keyframes floatFromLeft {
            0%   { transform: translateX(-100%) rotate(-5deg); opacity: 0; }
            5%   { opacity: 1; }
            95%  { opacity: 1; }
            100% { transform: translateX(calc(100vw + 100%)) rotate(5deg); opacity: 0; }
        }

        /* Right to left */
        @keyframes floatFromRight {
            0%   { transform: translateX(calc(100vw + 100%)) rotate(5deg); opacity: 0; }
            5%   { opacity: 1; }
            95%  { opacity: 1; }
            100% { transform: translateX(-100%) rotate(-5deg); opacity: 0; }
        }

        /* Top to bottom */
        @keyframes floatFromTop {
            0%   { transform: translateY(-100%) rotate(-3deg); opacity: 0; }
            5%   { opacity: 1; }
            95%  { opacity: 1; }
            100% { transform: translateY(calc(100vh + 100%)) rotate(3deg); opacity: 0; }
        }

        /* Bottom to top */
        @keyframes floatFromBottom {
            0%   { transform: translateY(calc(100vh + 100%)) rotate(3deg); opacity: 0; }
            5%   { opacity: 1; }
            95%  { opacity: 1; }
            100% { transform: translateY(-100%) rotate(-3deg); opacity: 0; }
        }

        /* Diagonal top-left to bottom-right */
        @keyframes floatDiagonalTLBR {
            0%   { transform: translate(-100%, -100%) rotate(-8deg); opacity: 0; }
            5%   { opacity: 1; }
            95%  { opacity: 1; }
            100% { transform: translate(calc(100vw + 100%), calc(100vh + 100%)) rotate(8deg); opacity: 0; }
        }

        /* Diagonal bottom-right to top-left */
        @keyframes floatDiagonalBRTL {
            0%   { transform: translate(calc(100vw + 100%), calc(100vh + 100%)) rotate(8deg); opacity: 0; }
            5%   { opacity: 1; }
            95%  { opacity: 1; }
            100% { transform: translate(-100%, -100%) rotate(-8deg); opacity: 0; }
        }

        /* ===================== */
        /* SPAWNED DENUTOS       */
        /* ===================== */
        .spawned-denuto {
            position: fixed;
            pointer-events: none;
            z-index: 4000;
            animation: denutoFloat 6s ease-in-out forwards;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
            background-image: url('dennis-cursor.png');
            background-size: cover;
            background-position: center;
            border: 2px solid white;
        }

        @keyframes denutoFloat {
            0%   { transform: scale(0) rotate(0deg); opacity: 1; }
            10%  { transform: scale(1.2) rotate(15deg); opacity: 1; }
            20%  { transform: scale(1) rotate(-5deg); opacity: 1; }
            80%  { transform: scale(1) rotate(360deg); opacity: 0.8; }
            100% { transform: scale(0.3) rotate(720deg) translateY(-200px); opacity: 0; }
        }

        /* ===================== */
        /* SERENITY MODE         */
        /* ===================== */
        #serenity-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 20000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 1s ease;
            opacity: 0;
        }

        #serenity-overlay.active {
            display: flex;
            opacity: 1;
        }

        #serenity-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                180deg,
                #87CEEB 0%,
                #87CEEB 40%,
                #4A90B8 40%,
                #3A7CA5 50%,
                #2E6B93 55%,
                #1a5276 100%
            );
        }

        /* Sun */
        #serenity-bg::before {
            content: '';
            position: absolute;
            top: 15%;
            right: 20%;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #FFD700;
            box-shadow: 0 0 60px 20px rgba(255, 215, 0, 0.4);
        }

        /* Clouds */
        #serenity-bg::after {
            content: '';
            position: absolute;
            top: 20%;
            left: 10%;
            width: 120px;
            height: 40px;
            border-radius: 40px;
            background: rgba(255, 255, 255, 0.8);
            box-shadow:
                160px 15px 0 10px rgba(255, 255, 255, 0.7),
                320px -10px 0 5px rgba(255, 255, 255, 0.6),
                50px 60px 0 8px rgba(255, 255, 255, 0.5);
        }

        #serenity-text {
            position: relative;
            z-index: 2;
            font-family: 'Georgia', serif;
            font-size: clamp(2rem, 6vw, 5rem);
            color: white;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
            opacity: 0;
            animation: serenityFadeIn 2s ease forwards 0.5s;
            text-align: center;
            padding: 0 1rem;
        }

        @keyframes serenityFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* Flash-back effect */
        #flash-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: white;
            z-index: 30000;
            display: none;
            opacity: 0;
        }

        #flash-overlay.active {
            display: block;
            animation: flashBang 0.4s ease-out forwards;
        }

        @keyframes flashBang {
            0%   { opacity: 1; }
            100% { opacity: 0; }
        }

        /* ===================== */
        /* SHARE THE VIBE BUTTON */
        /* ===================== */
        #share-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9000;
            background: rgba(0, 0, 0, 0.7);
            color: #FFD700;
            border: 2px solid #FFD700;
            padding: 12px 20px;
            font-family: 'Georgia', serif;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 8px;
            cursor: none;
            transition: all 0.3s ease;
            pointer-events: all;
        }

        #share-btn:hover {
            background: #FFD700;
            color: #000;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        /* Toast notification */
        #toast {
            position: fixed;
            bottom: 80px;
            right: 20px;
            z-index: 9001;
            background: rgba(0, 0, 0, 0.85);
            color: #FFD700;
            padding: 14px 22px;
            font-family: 'Georgia', serif;
            font-size: 0.95rem;
            border-radius: 8px;
            border: 1px solid #FFD700;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s ease;
            pointer-events: none;
            max-width: 320px;
        }

        #toast.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ===================== */
        /* VISITOR COUNTER       */
        /* ===================== */
        #visitor-counter {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 9000;
            background: rgba(0, 0, 0, 0.7);
            color: #00FF00;
            border: 1px solid #00FF00;
            padding: 8px 14px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            border-radius: 4px;
            pointer-events: none;
            text-align: center;
            line-height: 1.4;
            text-shadow: 0 0 8px rgba(0, 255, 0, 0.4);
        }

        #visitor-counter .counter-label {
            font-size: 0.65rem;
            color: #888;
            text-shadow: none;
        }

        /* ===================== */
        /* LEGAL DISCLAIMER      */
        /* ===================== */
        #legal-disclaimer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 8000;
            background: rgba(0, 0, 0, 0.85);
            color: #aaa;
            padding: 20px 30px;
            font-family: 'Georgia', serif;
            font-size: 0.75rem;
            line-height: 1.6;
            text-align: center;
            border-top: 1px solid #333;
            box-sizing: border-box;
        }

        #legal-disclaimer .legal-title {
            color: #FFD700;
            font-size: 0.85rem;
            font-weight: bold;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        #legal-disclaimer .legal-body {
            max-width: 700px;
            margin: 0 auto;
            color: #999;
        }
    </style>
</head>
<body>

    <!-- Dennis face cursor -->
    <div id="dennis-cursor"></div>

    <!-- Serenity mode overlay -->
    <div id="serenity-overlay">
        <div id="serenity-bg"></div>
        <div id="serenity-text">How's the serenity?</div>
    </div>

    <!-- Flash-back overlay -->
    <div id="flash-overlay"></div>

    <!-- Share the vibe button -->
    <button id="share-btn">Share the Vibe</button>

    <!-- Toast notification -->
    <div id="toast"></div>

    <!-- Visitor counter -->
    <div id="visitor-counter">
        <div class="counter-label">YOU ARE VISITOR</div>
        <div id="visitor-number">#1,247,803,442</div>
    </div>

    <!-- Legal disclaimer (at the very bottom — good luck scrolling here) -->
    <div id="legal-disclaimer">
        <div class="legal-title">LEGAL DISCLAIMER</div>
        <div class="legal-body">
            In summing up, it's the Constitution, it's Mabo, it's justice, it's law, it's the vibe and&hellip; no, that's it. It's the vibe. The contents of this website do not constitute legal advice. Dennis Denuto is not a real solicitor. Well, he is, but he shouldn't be. Any resemblance to actual legal proceedings is purely vibes-based. Section 51 of the Constitution may or may not apply. We checked. We couldn't find it. But it's in there somewhere. The vibe rests its case.
        </div>
    </div>

    <audio id="main-audio" preload="auto">
        <source src="its-the-vibe.mp3" type="audio/mpeg">
    </audio>
    <audio id="serenity-audio" preload="auto">
        <source src="hows-the-serenity.mp3" type="audio/mpeg">
    </audio>
    <audio id="bonnie-doon-audio" preload="auto">
        <source src="were-going-to-bonnie-doon.mp3" type="audio/mpeg">
    </audio>

    <script>
        // ================================
        // ORIGINAL FUNCTIONALITY
        // ================================
        const audio = document.getElementById('main-audio');
        const bonnieDoonAudio = document.getElementById('bonnie-doon-audio');
        const serenityAudio = document.getElementById('serenity-audio');
        let audioStarted = false;
        let vibeInterval = null;
        let bonnieInterval = null;

        function playAudio(el) {
            el.currentTime = 0;
            el.volume = 1;
            return el.play().catch(() => {});
        }

        // Play bonnie doon 3 times in a row (~4s each)
        function playBonnieDoon3x() {
            if (serenityActive) return;
            let count = 0;
            function playNext() {
                if (count >= 3 || serenityActive) return;
                count++;
                bonnieDoonAudio.currentTime = 0;
                bonnieDoonAudio.volume = 1;
                bonnieDoonAudio.play().catch(() => {});
                bonnieDoonAudio.onended = playNext;
            }
            playNext();
        }

        function startAudioLoops() {
            // "It's the vibe" plays every 30 seconds (starting at 0s)
            vibeInterval = setInterval(() => {
                if (serenityActive) return;
                playAudio(audio);
            }, 30000);

            // "Bonnie Doon" x3 plays every 30 seconds (starting at 15s offset)
            setTimeout(() => {
                playBonnieDoon3x();
                bonnieInterval = setInterval(() => {
                    playBonnieDoon3x();
                }, 30000);
            }, 15000);
        }

        function startAudioLoop() {
            if (audioStarted) return;
            audio.currentTime = 0;
            audio.volume = 1;
            audio.play().then(() => {
                // Only mark as started if play actually succeeded
                audioStarted = true;
                startAudioLoops();
            }).catch(() => {
                // Play was blocked — leave audioStarted false so we retry on next interaction
            });
        }

        // Start audio on first user interaction (click or touch — these are
        // "strong" user gestures that browsers trust for audio playback)
        ['click', 'touchstart', 'keydown'].forEach(evt => {
            document.addEventListener(evt, () => startAudioLoop(), { once: false });
        });

        let scrollSpeed = 2;
        let scrolling = true;

        const scrollInterval = setInterval(() => {
            if (!scrolling) return;
            window.scrollBy(0, scrollSpeed);
            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
                window.scrollTo(0, 0);
            }
        }, 20);

        // ================================
        // 1. DENNIS FACE CURSOR
        // ================================
        const dennisCursor = document.getElementById('dennis-cursor');

        document.addEventListener('mousemove', (e) => {
            dennisCursor.style.display = 'block';
            dennisCursor.style.left = e.clientX + 'px';
            dennisCursor.style.top = e.clientY + 'px';
        });

        document.addEventListener('mouseleave', () => {
            dennisCursor.style.display = 'none';
        });

        // ================================
        // 2. FLOATING QUOTES
        // ================================
        const quotes = [
            // Dennis Denuto courtroom classics
            "It's the vibe of the thing, your Honour.",
            "It's the Constitution, it's Mabo, it's justice, it's law, it's the vibe...",
            "In summing up... it's the vibe. I rest my case.",
            "It's just the vibe of the thing.",
            "There is no one section...",
            "I'd like to refer to a particular section...",
            "Could I have a moment, your Honour?",
            "This is a matter of... the vibe.",
            // Darryl Kerrigan
            "Tell him he's dreamin'!",
            "That's going straight to the pool room.",
            "This is going straight to the pool room!",
            "How's the serenity?",
            "We're going to Bonnie Doon!",
            "You can't buy what I've got.",
            "A man's home is his castle.",
            "It's not a house. It's a home.",
            "Jousting sticks!",
            "Dale dug a hole.",
            "What do you call this, love? Chicken.",
            "I dug another hole.",
            "Ah, the old overhead kick!",
            "You can do anything if you set your mind to it.",
            "How much do you reckon? Eh? Take a guess!",
            "Dad reckoned fishing was 10% brains, 95% muscle, the rest was just good luck.",
            // Sal & family
            "Suffer in ya jocks!",
            "Dad reckoned he was wrong.",
            "I'm a ideas man, Steve.",
            "What a beautiful set of gates!",
            "Ah, power lines. How much did that set ya back?",
            "He doesn't complain... much.",
            "And this is where we entertain.",
            "The dog's watching telly.",
            "It's a bit of a rumpus room.",
            // Lawrence Hammill / legal
            "The law of compulsory acquisition...",
            "Section 51... it's in there somewhere.",
            "The vibe of the Constitution!",
            "Every Australian should have a copy.",
            // Misc vibes
            "It's the vibe... and that's it.",
            "Your Honour, may I approach the bench?",
            "This home is worth more than you'll ever know.",
            "I'd trade my law degree for a set of jousting sticks."
        ];

        const quoteSizes = ['1.2rem', '1.6rem', '2rem', '2.5rem', '1.4rem', '1.8rem'];
        const quoteColors = ['#FFFFFF', '#FFD700', '#FF6B6B', '#7BFFB4', '#7BB3FF', '#FF7BF0'];

        const floatAnimations = [
            { name: 'floatFromLeft',     posAxis: 'top',  posRange: [5, 85] },
            { name: 'floatFromRight',    posAxis: 'top',  posRange: [5, 85] },
            { name: 'floatFromTop',      posAxis: 'left', posRange: [5, 75] },
            { name: 'floatFromBottom',   posAxis: 'left', posRange: [5, 75] },
            { name: 'floatDiagonalTLBR', posAxis: 'none', posRange: [0, 0]  },
            { name: 'floatDiagonalBRTL', posAxis: 'none', posRange: [0, 0]  },
        ];

        function spawnQuote() {
            const quote = document.createElement('div');
            quote.className = 'floating-quote';
            quote.textContent = quotes[Math.floor(Math.random() * quotes.length)];

            const size = quoteSizes[Math.floor(Math.random() * quoteSizes.length)];
            const color = quoteColors[Math.floor(Math.random() * quoteColors.length)];
            const duration = Math.random() * 8 + 7;
            const anim = floatAnimations[Math.floor(Math.random() * floatAnimations.length)];

            quote.style.fontSize = size;
            quote.style.color = color;
            quote.style.animationName = anim.name;
            quote.style.animationDuration = duration + 's';
            quote.style.animationTimingFunction = 'linear';
            quote.style.animationFillMode = 'forwards';

            // Position on the appropriate axis
            if (anim.posAxis === 'top') {
                const pos = Math.random() * (anim.posRange[1] - anim.posRange[0]) + anim.posRange[0];
                quote.style.top = pos + '%';
            } else if (anim.posAxis === 'left') {
                const pos = Math.random() * (anim.posRange[1] - anim.posRange[0]) + anim.posRange[0];
                quote.style.left = pos + '%';
            }
            // Diagonal animations don't need positioning — they go corner to corner

            document.body.appendChild(quote);

            setTimeout(() => quote.remove(), duration * 1000 + 100);
        }

        // Spawn quotes at random intervals
        function scheduleQuote() {
            const delay = Math.random() * 3000 + 1500;
            setTimeout(() => {
                if (!serenityActive) spawnQuote();
                scheduleQuote();
            }, delay);
        }
        scheduleQuote();

        // ================================
        // 3. CLICK TO SPAWN DENUTOS
        // ================================
        let denutoCount = 0;

        document.addEventListener('click', (e) => {
            // Don't spawn on share button
            if (e.target.id === 'share-btn') return;
            if (serenityActive) return;

            denutoCount++;

            const denuto = document.createElement('div');
            denuto.className = 'spawned-denuto';

            const size = Math.random() * 120 + 60;
            denuto.style.width = size + 'px';
            denuto.style.height = size + 'px';
            denuto.style.left = (e.clientX - size / 2) + 'px';
            denuto.style.top = (e.clientY - size / 2) + 'px';

            document.body.appendChild(denuto);

            setTimeout(() => denuto.remove(), 6100);

            // Easter egg: after 10 clicks, briefly flash a quote
            if (denutoCount === 10) {
                showToast("Dennis Denuto would be proud. That's going straight to the pool room.");
            }
            if (denutoCount === 25) {
                showToast("You've summoned " + denutoCount + " Denutos. The vibe is reaching critical mass.");
            }
            if (denutoCount === 50) {
                showToast("50 Denutos. In summing up... it's the vibe. You rest your case.");
            }
        });

        // ================================
        // 4. SERENITY MODE
        // ================================
        let serenityActive = false;
        let serenityTriggered = false;

        const serenityOverlay = document.getElementById('serenity-overlay');
        const flashOverlay = document.getElementById('flash-overlay');

        // Trigger serenity at 52s — safely between the audio cycles
        // (vibe plays at 0/30/60s, bonnie at 15/45s, so 52s is in a quiet gap)
        setTimeout(() => {
            if (serenityTriggered) return;
            serenityTriggered = true;
            activateSerenity();
        }, 52000);

        function activateSerenity() {
            serenityActive = true;
            scrolling = false;

            // Stop audio loops during serenity
            if (vibeInterval) clearInterval(vibeInterval);
            if (bonnieInterval) clearInterval(bonnieInterval);
            bonnieDoonAudio.onended = null;
            bonnieDoonAudio.pause();

            // Fade out all audio, then play serenity sound
            let vol = audio.volume;
            const fadeAudio = setInterval(() => {
                vol -= 0.05;
                if (vol <= 0) {
                    vol = 0;
                    audio.pause();
                    clearInterval(fadeAudio);

                    // Audio fully faded — now play serenity sound
                    playAudio(serenityAudio);
                }
                audio.volume = vol;
            }, 100);

            // Show serene overlay
            serenityOverlay.classList.add('active');
            // Fade in
            requestAnimationFrame(() => {
                serenityOverlay.style.opacity = '1';
            });

            // After 5 seconds — SNAP BACK TO CHAOS
            // (extra second to let the serenity sound breathe)
            setTimeout(() => {
                endSerenity();
            }, 5000);
        }

        function endSerenity() {
            // Flash!
            flashOverlay.classList.add('active');

            setTimeout(() => {
                serenityOverlay.classList.remove('active');
                serenityOverlay.style.opacity = '0';
                flashOverlay.classList.remove('active');

                // Resume chaos - LOUDER
                serenityActive = false;
                serenityAudio.pause();
                audio.currentTime = 0;
                audio.volume = 1;
                audio.play().catch(() => {});
                scrolling = true;

                // Restart the alternating audio loops
                startAudioLoops();

                // Increase scroll speed post-serenity for extra chaos
                scrollSpeed = 4;

                // Burst of quotes
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => spawnQuote(), i * 300);
                }

                // Spawn a bunch of Denutos
                for (let i = 0; i < 8; i++) {
                    setTimeout(() => {
                        const fakeEvent = {
                            clientX: Math.random() * window.innerWidth,
                            clientY: Math.random() * window.innerHeight
                        };
                        const denuto = document.createElement('div');
                        denuto.className = 'spawned-denuto';
                        const size = Math.random() * 150 + 80;
                        denuto.style.width = size + 'px';
                        denuto.style.height = size + 'px';
                        denuto.style.left = (fakeEvent.clientX - size / 2) + 'px';
                        denuto.style.top = (fakeEvent.clientY - size / 2) + 'px';
                        document.body.appendChild(denuto);
                        setTimeout(() => denuto.remove(), 6100);
                    }, i * 200);
                }

                // Gradually return to normal speed
                setTimeout(() => { scrollSpeed = 2; }, 10000);

            }, 400);
        }

        // ================================
        // 5. SHARE THE VIBE BUTTON
        // ================================
        const shareBtn = document.getElementById('share-btn');
        const toast = document.getElementById('toast');

        const shareMessages = [
            "The vibe has been shared. You cannot undo this.",
            "You have spread the vibe. Dennis Denuto smiles upon you.",
            "The vibe is now loose. What have you done.",
            "In summing up... the vibe has been shared. You rest your case.",
            "Link copied. It's the Constitution, it's Mabo, it's the clipboard.",
            "That link's going straight to the pool room.",
            "The vibe has been transmitted. There is no antidote."
        ];

        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('visible');
            setTimeout(() => {
                toast.classList.remove('visible');
            }, 4000);
        }

        shareBtn.addEventListener('click', (e) => {
            e.stopPropagation();

            // Copy URL to clipboard
            navigator.clipboard.writeText('https://www.its-the-vibe.com').then(() => {
                const msg = shareMessages[Math.floor(Math.random() * shareMessages.length)];
                showToast(msg);
            }).catch(() => {
                showToast("The vibe refused to be contained by your clipboard.");
            });
        });

        // ================================
        // 6. FAKE VISITOR COUNTER
        // ================================
        const visitorNumber = document.getElementById('visitor-number');
        let visitorCount = 1247803442 + Math.floor(Math.random() * 500);

        setInterval(() => {
            visitorCount += Math.floor(Math.random() * 47) + 3;
            visitorNumber.textContent = '#' + visitorCount.toLocaleString();
        }, Math.random() * 800 + 400);
    </script>
</body>
</html>
